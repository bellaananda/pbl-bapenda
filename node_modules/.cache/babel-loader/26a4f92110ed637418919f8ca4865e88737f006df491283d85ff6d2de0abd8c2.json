{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { onMounted, ref, reactive } from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\nexport default {\n  setup() {\n    //read\n    let posts = ref([]);\n    onMounted(() => {\n      axios.get('http://localhost:8000/api/departments').then(response => {\n        posts.value = response.data.data;\n      }).catch(error => {\n        console.log(error.response.data);\n      });\n    });\n\n    //create\n    const post = reactive({\n      name: ''\n    });\n    const validation = ref([]);\n    const router = useRouter();\n    function store() {\n      let name = post.name;\n      axios.post('http://localhost:8000/api/departments', {\n        name: name\n      }).then(() => {\n        router.push({\n          name: 'departments.index'\n        });\n      }).catch(error => {\n        validation.value = error.response.data;\n      });\n    }\n\n    //update\n    const route = useRoute();\n    onMounted(() => {\n      axios.get(`http://localhost:8000/api/departments${route.params.id}`).then(response => {\n        post.name = response.data.data.name;\n      }).catch(error => {\n        console.log(error.response.data);\n      });\n    });\n    function update() {\n      let name = post.name;\n      axios.put(`http://localhost:8000/apidepartments/${route.params.id}`, {\n        name: name\n      }).then(() => {\n        router.push({\n          name: 'departments.index'\n        });\n      }).catch(error => {\n        validation.value = error.response.data;\n      });\n    }\n\n    //delete\n    function postDelete(id) {\n      axios.delete(\"http://localhost:8000/api/departments/\" + id).then(() => {\n        const index = this.posts.findIndex(post => post.id === id);\n        if (~index) {\n          this.posts.splice(index, 1);\n        }\n      }).catch(error => {\n        console.log(error.response.data);\n      });\n    }\n    return {\n      posts,\n      post,\n      validation,\n      router,\n      store,\n      update,\n      postDelete\n    };\n  }\n};","map":{"version":3,"names":["axios","onMounted","ref","reactive","useRouter","useRoute","setup","posts","get","then","response","value","data","catch","error","console","log","post","name","validation","router","store","push","route","params","id","update","put","postDelete","delete","index","findIndex","splice"],"sources":["C:\\wamp64\\www\\pbl-front\\src\\views\\admin\\DepartmentPegawai.vue"],"sourcesContent":["<template>\r\n  <div class=\"content-wrapper\">\r\n        <div class=\"row\">\r\n          <div class=\"col-md-12 grid-margin title\">\r\n            <div class=\"row\">\r\n              <div class=\"col-12 align-items-center\">\r\n                <h3 class=\"font-weight-bold\">KELOLA DEPARTMENT BAPENDA SURAKARTA</h3>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"col-md-12 grid-margin stretch-card\">\r\n            <div class=\"card\">\r\n              <div class=\"card-body\">\r\n                <p class=\"card-description float-right\">\r\n                  <a href=\"#\" class=\"btn btn-sm btn-primary btn-icon-text\" data-toggle=\"modal\" data-target=\"#modalCreate\">\r\n                    <i class=\"mdi mdi-plus btn-icon-prepend\"></i>\r\n                    Tambah\r\n                  </a>\r\n                </p>\r\n                <div class=\"table-responsive\">\r\n                  <table class=\"table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>No</th>\r\n                        <th>Department</th>\r\n                        <th></th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      <tr v-for=\"(departments, index) in posts\" :key=\"index\">\r\n                        <td>{{ departments.id }}</td>\r\n                        <td>{{ departments.name }}</td>\r\n                        <td>\r\n                          <a href=\"#\" class=\"btn btn-sm\" data-toggle=\"modal\" data-target=\"#modalEdit\">\r\n                            <i class=\"mdi mdi-pencil btn-icon-prepend\"></i>\r\n                          </a>\r\n                          <a href=\"\" class=\"btn btn-sm btn-danger\" @click.prevent=\"deleteDepartment(employee.id)\">\r\n                              <i class=\"mdi mdi-delete btn-icon-prepend\"></i>\r\n                          </a>\r\n                        </td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"modal fade\" id=\"modalTambah\" aria-labelledby=\"ModalLabel\">\r\n          <div class=\"modal-dialog\" role=\"document\">\r\n            <div class=\"modal-content modal-md\">\r\n              <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"ModalLabel\">Form Tambah Department</h5>\r\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n              <div class=\"modal-body\">\r\n                  <form class=\"forms-sample\" @submit.prevent=\"store\">\r\n                      <div class=\"form-group\">\r\n                        <label for=\"inputDepartments\">Department</label>\r\n                        <input type=\"text\" class=\"form-control\" v-model=\"post.name\" id=\"inputDepartment\" placeholder=\"Department\">\r\n                        <div v-if=\"validation.name\" class=\"mt-2 alert alert-danger\">\r\n                          {{ validation.name[0] }}\r\n                        </div>\r\n                      </div>\r\n                      <button type=\"submit\" class=\"btn btn-primary mr-2\">Simpan</button>\r\n                      <button class=\"btn btn-light\">Batalkan</button>\r\n                  </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n         \r\n        <div class=\"modal fade\" id=\"modalEdit\" aria-labelledby=\"ModalLabel\">\r\n        <div class=\"modal-dialog\" role=\"document\">\r\n          <div class=\"modal-content modal-md\">\r\n            <div class=\"modal-header\">\r\n              <h5 class=\"modal-title\" id=\"ModalLabel\">Form Edit Department</h5>\r\n              <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                <span aria-hidden=\"true\">&times;</span>\r\n              </button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n              <form @submit.prevent=\"update\" class=\"forms-sample\">\r\n                <div class=\"form-group\">\r\n                  <label for=\"inputDepartment\">Department</label>\r\n                  <input type=\"text\" class=\"form-control\" id=\"inputDepartment\" v-model=\"post.name\" placeholder=\"Department\">\r\n                  <div v-if=\"validation.nama\" class=\"mt-2 alert alert-danger\">\r\n                    {{ validation.name[0] }}\r\n                  </div>\r\n                </div>\r\n                <button type=\"submit\" class=\"btn btn-primary mr-2\">Simpan</button>\r\n                <button class=\"btn btn-light\">Batalkan</button>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>    \r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport { onMounted, ref, reactive } from 'vue'\r\nimport { useRouter, useRoute } from 'vue-router'\r\n\r\nexport default {\r\nsetup() {\r\n\r\n  //read\r\n  let posts = ref([])\r\n\r\n  onMounted(() => {\r\n    axios.get('http://localhost:8000/api/departments')\r\n    .then(response => {\r\n      posts.value = response.data.data\r\n    }).catch(error => {\r\n     console.log(error.response.data)\r\n    })\r\n  })\r\n\r\n  //create\r\n  const post = reactive({\r\n    name: ''\r\n  })\r\n\r\n  const validation = ref([])\r\n  const router = useRouter()\r\n\r\n  function store() {\r\n    let name = post.name\r\n\r\n    axios.post('http://localhost:8000/api/departments', {\r\n      name: name\r\n    }).then(() => {\r\n      router.push ({\r\n        name: 'departments.index'\r\n      })\r\n    }).catch(error => {\r\n     validation.value = error.response.data\r\n    })\r\n  }\r\n\r\n  //update\r\n  const route = useRoute()\r\n\r\n  onMounted(() => {\r\n\r\n    axios.get(`http://localhost:8000/api/departments${route.params.id}`)\r\n    .then(response => {\r\n      post.name    = response.data.data.name\r\n    }).catch(error => {\r\n      console.log(error.response.data)\r\n    })\r\n  })\r\n  \r\n  \r\n  function update() {\r\n    let name = post.name\r\n\r\n    axios.put(`http://localhost:8000/apidepartments/${route.params.id}`, {\r\n      name: name,\r\n    }).then(() => {\r\n        router.push({\r\n          name: 'departments.index'\r\n      })\r\n    }).catch(error => {\r\n        validation.value = error.response.data\r\n    })\r\n  }\r\n\r\n  //delete\r\n  function postDelete(id) {\r\n    axios.delete(\"http://localhost:8000/api/departments/\" + id)\r\n    .then(() => {\r\n      const index = this.posts.findIndex(post => post.id === id)\r\n\r\n      if(~index) {\r\n        this.posts.splice(index, 1)\r\n      }\r\n    }).catch(error => {\r\n      console.log(error.response.data)\r\n    })\r\n  }\r\n\r\n  return {\r\n    posts,\r\n    post,\r\n    validation,\r\n    router,\r\n    store,\r\n    update,\r\n    postDelete\r\n  }\r\n}\r\n}\r\n</script>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}